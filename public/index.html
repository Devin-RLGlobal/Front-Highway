<!DOCTYPE html>
<html lang="en">
<head>
  <script type="text/javascript" src="//dl.frontapp.com/libs/plugin-sdk-1.8.1.min.js"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Front Plugin</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>Front Plugin</h1>  
  <button id="move-email-btn">Quarantine Email</button>
  <div id="highway-data"></div>
  <script src="../src/front.js" type="module"></script>
  <script type="module">
    import { moveEmail } from '../src/front.js';
    window.addEventListener('highwayDataUpdated', (event) => {
      const data = event.detail;
      const filteredData = {
    Title: data.dotSearch.legal_name,
    Description: data.dotSearch.authority_assessment.rating,
    OverallResult: data.dotSearch.rules_assessment.overall_result,
    SafetyRating: data.dotSearch.safety.safety_rating,
    ContractStatus: data.dotSearch.authority.authorities.contract_authority_status || "N/A",
    CommonStatus: data.dotSearch.authority.authorities.common_authority_status || "N/A",
    BrokerStatus: data.dotSearch.authority.authorities.broker_authority_status || "N/A",
    ConnectionStatus: data.dotSearch.connection || "N/A",
    CarrierID: data.dotSearch.dot_number,
    LegalName: data.dotSearch.legal_name,
    MCNumber: data.dotSearch.mc_number,
    DOTNumber: data.dotSearch.dot_number,
    Address: `${data.dotSearch.addresses[0].street1}, ${data.dotSearch.addresses[0].city}, ${data.dotSearch.addresses[0].state} ${data.dotSearch.addresses[0].postal_code}`,
    DispatchPhone: data.dotSearch.contact_information.dispatch_contact.phone,
    DispatchEmail: data.dotSearch.contact_information.dispatch_contact.email_address
  };

    const container = document.getElementById('highway-data');
    container.innerHTML = `<pre>${JSON.stringify(filteredData, null, 2)}</pre>`;
    });

    document.getElementById('move-email-btn').addEventListener('click', () => {
      moveEmail();
    });

  </script>
</body>
</html>
